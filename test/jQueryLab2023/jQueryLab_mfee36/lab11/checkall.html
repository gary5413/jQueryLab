<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>lab11</title>
    <link rel="stylesheet" href="../style.css" />
    <style>
      table {
        border: 2px solid black;
        width: 500px;
        margin: 5px;
        text-align: center;
      }
      td {
        border: 1px solid black;
      }
      tr.active {
        background-color: pink;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>CheckAll</h1>
    </header>
    <div class="container">
      <table>
        <thead>
          <tr>
            <th><input type="checkbox" name="" id="checkAll" /></th>
            <th>Name</th>
            <th>Date</th>
            <th>Content</th>
          </tr>
        </thead>
        <tbody>
          <tr class="content">
            <td><input type="checkbox" class="checkbox1" /></td>
            <td>Gary</td>
            <td>2022/12/09</td>
            <td>FUEN25 jQuery</td>
          </tr>
          <tr class="content">
            <td><input type="checkbox" class="checkbox1" /></td>
            <td>Gary</td>
            <td>2022/12/09</td>
            <td>FUEN25 jQuery</td>
          </tr>
          <tr class="content">
            <td><input type="checkbox" class="checkbox1" /></td>
            <td>Gary</td>
            <td>2022/12/09</td>
            <td>FUEN25 jQuery</td>
          </tr>
        </tbody>
      </table>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.1.js"></script>
    <!-- <script src="all.js"></script> -->
    <script>
      $(function () {
        console.log($('.content').length);
        let maxLenght = 3;
        $(".checkbox1").on("click", function () {
          let checked = $(this).prop("checked");
          // console.log(checked);
          if (checked) {
            $(this).closest("tr").addClass("active");
            // .parent().parent()
            // .parentsUntil('table')
          } else {
            $(this).closest("tr").removeClass("active");
          }
          let contentLength = $("tr.active").length;
          console.log(contentLength);
          if (contentLength == maxLenght) {
            $("#checkAll").prop("checked", true);
          } else {
            $("#checkAll").prop("checked", false);
          }
        });

        $("#checkAll").on("click", function () {
          let checked = $(this).prop("checked");
          // console.log(checked);
          if (checked) {
            $(".checkbox1").prop("checked", true);
            $(".content").addClass("active");
          } else {
            $(".checkbox1").prop("checked", false);
            $(".content").removeClass("active");
          }
        });
      });
    </script>
  </body>
</html>
